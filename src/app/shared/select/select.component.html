<div class="compact-select">
  <mat-form-field appearance="outline">
    <mat-select [(value)]="selected">
      <!-- This controls what is shown when the dropdown is closed -->
      <mat-select-trigger>
        <img
          class="flag-icon"
          [src]="getSelectedLang()?.flag"
          [alt]="getSelectedLang()?.label + ' flag'"
        />
        <span class="lang-label">{{ getSelectedLang()?.label }}</span>
      </mat-select-trigger>

      <!-- Dropdown options -->
      <mat-option *ngFor="let lang of languages" [value]="lang.code">
        <img class="flag-icon" [src]="lang.flag" [alt]="lang.label + ' flag'" />
        <span class="lang-label">{{ lang.label }}</span>
      </mat-option>
    </mat-select>
  </mat-form-field>
</div>
